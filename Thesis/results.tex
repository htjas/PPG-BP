\subsection{Data Fetching}
\label{subsec:data_fetching}

Data for Validation from MIMIC4:
5508 records each containing 37795 values corresponding to ~605 seconds (fs=64.4725);

Data for Training/Testing from MIMIC3:
22083 (~4*MIMIC4) records each containing 75625 values corresponding to 605 seconds (fs=125);

\subsection{Feature Extraction}
\label{subsec:feature_extraction}

FE from MIMIC4 for Validation:
- For target reference Systolic, Diastolic and MAP values were extracted from the waveform data.
- For Machine Learning, 34 features were extracted from the PPG waveform
A total of \textbf{1,309,265} values were extracted, resulting in a 34 x 1,309,265 matrix.
Total of \textbf{183,140} median values were extracted.

FE from MIMIC3 for Training/Testing:

- For target reference ABP Systolic, Diastolic and MAP values were extracted from the waveform data.
- For Machine Learning, 34 features were extracted from the PPG waveform
A total of \textbf{13,659,375} values were extracted, resulting in a 34 x 13659375 matrix.
Total of \textbf{1,918,623} median values were extracted.

The summarized results are displayed in Table~\ref{tab:records}.
Data Flow is visualized in Figure~\ref{fig:data_flow}.

\begin{table}{\textwidth}
    \renewcommand{\arraystretch}{1.5} % Increase vertical spacing
    \setlength{\tabcolsep}{12pt} % Increase horizontal spacing
    \begin{center}
        \begin{tabular}{ |c|c|c| }
            \hline
            & MIMIC-III  & MIMIC-IV  \\
            \hline
            Records       & 22,083     & 5,508     \\
            \hline
            Total Values  & 13,659,375 & 1,309,265 \\
            \hline
            Median Values & 1,918,623  & 183,140   \\
            \hline
        \end{tabular}
    \end{center}
    \captionsetup{format=plain, justification=centering}
    \caption{Fetched and Extracted Data from MIMIC-III and MIMIC-IV DBs}
    \label{tab:records}
\end{table}

\begin{figure}[h]
    \centering
    \includegraphics[width=0.9\textwidth]{images/results/flow_diagram}
    \caption{Flow Diagram presenting the Data Fetching and Processing}
    \label{fig:data_flow}
\end{figure}

\subsection{Machine Learning}
\label{subsec:machine_learning}

%\begin{figure}
%    \centering
%    \begin{subfigure}{0.5\textwidth}
%        \centering
%        \includegraphics[width=0.4\linewidth]{images/results/LSTM_GRU_Train_mse}
%        \caption{LSTM \& GRU Train MSE}
%        \label{fig:train_mse}
%    \end{subfigure}
%    \begin{subfigure}{0.5\textwidth}
%        \includegraphics[width=0.4\linewidth]{images/results/LSTM_GRU_Test_mse}
%        \caption{LSTM \& GRU Test MSE}
%        \label{fig:test_mse}
%    \end{subfigure}
%\end{figure}

\begin{figure}[h]
    \centering
    \includegraphics[width=0.4\linewidth]{images/results/LSTM_GRU_Train_mse}
    \caption{LSTM \& GRU Train MSE}
    \label{fig:train_mse}
\end{figure}

\begin{figure}[h]
    \centering
    \includegraphics[width=0.4\linewidth]{images/results/LSTM_GRU_Test_mse}
    \caption{LSTM \& GRU Test MSE}
    \label{fig:test_mse}
\end{figure}

\begin{figure}[h]
    \centering
    \includegraphics[width=0.5\textwidth]{images/results/feature_importance_plot_GRU_0}
    \caption{Feature Importance Chart}
    \label{fig:feat_importance}
\end{figure}
